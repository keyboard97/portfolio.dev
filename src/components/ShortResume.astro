---
import type { LocaleType } from "../i18n";
import { useTranslations } from "../i18n";
import SectionSelector from "./SectionSelector.astro";
import SocialLinks from "./SocialLinks.astro";

const t = useTranslations(Astro.currentLocale as LocaleType);
---

<div
  class="transition-all duration-700 flex flex-col gap-4 justify-between md:w-1/3 w-full md:h-[60%] fixed md:top-auto top-0 py-5 md:bg-transparent bg-bg-color"
>
  <div class="flex flex-col gap-3">
    <h1 class="text-5xl font-bold title transition-all duration-700">
      {t("info.resume.name")}
    </h1>
    <h3 class="text-xl position transition-all duration-700">
      {t("info.resume.position")}
    </h3>
    <p class="text-base w-3/4 description transition-all duration-700">
      {t("info.resume.description")}
    </p>
  </div>
  <SectionSelector />
  <SocialLinks />
</div>

<script>
  const clientWidth = document.documentElement.clientWidth;

  const title = document.querySelector(".title");
  const position = document.querySelector(".position");
  const description = document.querySelector(".description");
  const sectionSelector = document.querySelector(".nav-section");

  if (clientWidth < 768) {
    document.addEventListener("scroll", () => {
      const scrollY = window.scrollY;
      if (scrollY > 80) {
        title?.classList.remove("text-5xl");
        position?.classList.remove("text-xl");

        title?.classList.add("text-3xl");
        position?.classList.add("hidden");
        description?.classList.add("hidden");
        sectionSelector?.classList.add("hidden");
      } else {
        title?.classList.add("text-5xl");
        position?.classList.add("text-xl");

        title?.classList.remove("text-3xl");
        position?.classList.remove("hidden");
        description?.classList.remove("hidden");
        sectionSelector?.classList.remove("hidden");
      }
    });
  }
</script>
